<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>

    <script lightwindsrc="./lightTheme.json">
        {
            "use strict";

            // Init style tag where data = lightwindcss
            let styleLightWind = document.createElement('style');
            styleLightWind.setAttribute('data', 'lightwindcss');
            styleLightWind.textContent = '.hidden{display:none;}.invisible{visibility:hidden;}'
            document.head.appendChild(styleLightWind);

            let allClasses = [];

            (() => {
                fetch(document.querySelector('[lightwindsrc]').getAttribute('lightwindsrc'))
                    .then(async function(res) {
                        res = await res.json();
                        console.log(res)
                    })
            })();

            async function resolveClass(className) {
                let classSubParams = className.split(':'), styleSre = ''
                for (i in classSubParams) {
                    if (i == 0) {
                        // screen + selector 
                    }
                    else if (i == classSubParams.length - 1) {
                        // value
                    }
                    else {
                        // selector
                    }
                }
            }

            // mutations
            (() => {
                new MutationObserver(function(mutations) {
                    mutations.forEach(mutation => {
                        try {
                            mutation.addedNodes.forEach(node => {
                                if (typeof(node.classList) != 'undefined') {
                                    node.classList.forEach(elClass => {
                                        if (allClasses.indexOf(elClass) == -1) {
                                            resolveClass(elClass)
                                            allClasses.push(elClass)
                                        }
                                    })
                                }
                            })
                        } catch {}
                    })
                }).observe(document, { subtree: true, childList: true });

                new MutationObserver(function(mutations) {
                    try {
                        mutations.forEach(mutation => {
                            mutation.target.classList.forEach(elClass => {
                                if (allClasses.indexOf(elClass) == -1) {
                                    resolveClass(elClass)
                                    allClasses.push(elClass)
                                }
                            })
                        })
                    } catch {}
                }).observe(document, { attributes: true, attributeFilter: ["class"], subtree: true });
            })()
        }
    </script>
</head>
<body>
    <div class="lol">
        <a href="#" class="dgfd:ll>ss">
            <ul class="left>10">
                <li class="absolute"></li>
                <li class="l>1"></li>
                <li class="opacity>0"></li>
                <li class="gg"></li>
                <li class="gg"></li>
            </ul>
        </a>
    </div>
</body>
</html>
